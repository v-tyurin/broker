FROM php:7.4-cli
RUN apt-get update && \
    apt-get -y install wget gnupg2 apt-utils software-properties-common && \
    wget -qO - https://packages.confluent.io/deb/6.0/archive.key | apt-key add - && \
    add-apt-repository "deb [arch=amd64] https://packages.confluent.io/deb/6.0 stable main" && \
    apt-get update && \
    apt install librdkafka1 librdkafka-dev
COPY . /usr/app
WORKDIR /usr/app
CMD [ "php", "./consumer.php", "start"]